{"$schema":"http://json-schema.org/draft-04/schema#","id":"http://hl7.org/fhir/json-schema/Subscription","$ref":"#/definitions/Subscription","description":"see http://hl7.org/fhir/json.html#schema for information about the FHIR Json Schemas","definitions":{"Subscription":{"description":"The subscription resource is used to define a push based subscription from a server to another system. Once a subscription is registered with the server, the server checks every resource that is created or updated, and if the resource matches the given criteria, it sends a message on the defined \"channel\" so that another system is able to take an appropriate action.","properties":{"resourceType":{"description":"This is a Subscription resource","type":"string","enum":["Subscription"]},"status":{"description":"The status of the subscription, which marks the server state for managing the subscription.","enum":["requested","active","error","off"],"type":"string"},"contact":{"description":"Contact details for a human to contact about the subscription. The primary use of this for system administrator troubleshooting.","type":"array","items":{"$ref":"#/definitions/ContactPoint","type":"object"}},"end":{"description":"The time for the server to turn the subscription off.","type":"string"},"reason":{"description":"A description of why this subscription is defined.","type":"string"},"criteria":{"description":"The rules that the server should use to determine when to generate notifications for this subscription.","type":"string"},"error":{"description":"A record of the last error that occurred when the server processed a notification.","type":"string"},"channel":{"description":"Details where to send notifications when resources are received that meet the criteria.","$ref":"#/definitions/Subscription_Channel"},"tag":{"description":"A tag to add to any resource that matches the criteria, after the subscription is processed.","type":"array","items":{"$ref":"#/definitions/Coding","type":"object"}}},"required":["channel","resourceType"]},"Subscription_Channel":{"description":"The subscription resource is used to define a push based subscription from a server to another system. Once a subscription is registered with the server, the server checks every resource that is created or updated, and if the resource matches the given criteria, it sends a message on the defined \"channel\" so that another system is able to take an appropriate action.","properties":{"type":{"description":"The type of channel to send notifications on.","enum":["rest-hook","websocket","email","sms","message"],"type":"string"},"endpoint":{"description":"The uri that describes the actual end-point to send messages to.","type":"string"},"payload":{"description":"The mime type to send the payload in - either application/fhir+xml, or application/fhir+json. If the payload is not present, then there is no payload in the notification, just a notification.","type":"string"},"header":{"description":"Additional headers / information to send as part of the notification.","type":"array","items":{"type":"string"}}}},"ContactPoint":{"description":"Details for all kinds of technology mediated contact points for a person or organization, including telephone, email, etc.","properties":{"system":{"description":"Telecommunications form for contact point - what communications system is required to make use of the contact.","enum":["phone","fax","email","pager","url","sms","other"],"type":"string"},"value":{"description":"The actual contact point details, in a form that is meaningful to the designated communication system (i.e. phone number or email address).","type":"string"},"use":{"description":"Identifies the purpose for the contact point.","enum":["home","work","temp","old","mobile"],"type":"string"},"rank":{"description":"Specifies a preferred order in which to use a set of contacts. Contacts are ranked with lower values coming before higher values.","type":"number","pattern":"[1-9][0-9]*"},"period":{"description":"Time period when the contact point was/is in use.","$ref":"#/definitions/Period","type":"object"}}},"Coding":{"description":"A reference to a code defined by a terminology system.","properties":{"system":{"description":"The identification of the code system that defines the meaning of the symbol in the code.","type":"string"},"version":{"description":"The version of the code system which was used when choosing this code. Note that a well-maintained code system does not need the version reported, because the meaning of codes is consistent across versions. However this cannot consistently be assured. and when the meaning is not guaranteed to be consistent, the version SHOULD be exchanged.","type":"string"},"code":{"description":"A symbol in syntax defined by the system. The symbol may be a predefined code or an expression in a syntax defined by the coding system (e.g. post-coordination).","type":"string","pattern":"[^\\s]+([\\s]?[^\\s]+)*"},"display":{"description":"A representation of the meaning of the code in the system, following the rules of the system.","type":"string"},"userSelected":{"description":"Indicates that this coding was chosen by a user directly - i.e. off a pick list of available items (codes or displays).","type":"boolean"}}},"Period":{"description":"A time period defined by a start and end date and optionally time.","properties":{"start":{"description":"The start of the period. The boundary is inclusive.","type":"string","pattern":"-?[0-9]{4}(-(0[1-9]|1[0-2])(-(0[0-9]|[1-2][0-9]|3[0-1])(T([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\\.[0-9]+)?(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00)))?)?)?"},"end":{"description":"The end of the period. If the end of the period is missing, it means that the period is ongoing. The start may be in the past, and the end date in the future, which means that period is expected/planned to end at that time.","type":"string","pattern":"-?[0-9]{4}(-(0[1-9]|1[0-2])(-(0[0-9]|[1-2][0-9]|3[0-1])(T([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\\.[0-9]+)?(Z|(\\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00)))?)?)?"}}}},"type":"object"}